<section class="relative w-full">
  <!-- HERO CONTACTO -->
<div class="relative min-h-[80vh] flex items-center justify-center px-6 md:px-16 text-[#0E1E2C]
            bg-cover bg-center"
     style="background-image: url('Presentation.jpeg')">

  <!-- Overlay -->
  <div class="absolute inset-0 bg-black/50"></div>

  <!-- Contenido -->
  <div class="relative z-10 max-w-5xl w-full flex flex-col md:flex-row items-center gap-12">

    <!-- Logo estilo HOME -->
    <div class="w-full md:w-1/2 flex items-center justify-center">
      <div class="bg-white rounded-full p-6 shadow-2xl">
        <img src="favicon.png"
             alt="Logo Vivero Quilino"
             class="w-48 h-48 object-contain">
      </div>
    </div>

    <!-- Texto -->
    <div class="w-full md:w-1/2 text-center md:text-left text-white">
      <h1 class="text-4xl md:text-5xl font-bold mb-4">
        Contactanos
      </h1>

      <p class="text-lg md:text-xl leading-relaxed text-white/90">
        驴Ten茅s alguna consulta?
        Pod茅s escribirnos para preguntar por nuestros productos, servicios
        o cualquier inquietud. 
        Estamos para ayudarte.
      </p>
    </div>

  </div>

  <!-- Separador inferior -->
  <div class="absolute bottom-0 left-0 w-full overflow-hidden leading-[0]">
    <svg class="relative block w-[calc(100%+1.3px)] h-[120px]"
         xmlns="http://www.w3.org/2000/svg"
         preserveAspectRatio="none"
         viewBox="0 0 2600 131.1">
      <path d="M0 0L2600 0 2600 69.1 0 0z" class="fill-white"></path>
      <path d="M0 0L2600 0 2600 69.1 0 69.1z" class="fill-white/70"></path>
      <path d="M2600 0L0 0 0 130.1 2600 69.1z" class="fill-white/40"></path>
    </svg>
  </div>

</div>


  @if (authService.isAuthenticated()) {
  <div class="w-full bg-[#E9F3ED] border-l-4 border-[#51946c] text-[#0e1a13] p-4 flex items-center justify-between rounded-md shadow-sm mt-4 mb-6">
    <p class="text-sm font-medium text-[#4A5C52]">Est谩s viendo una secci贸n editable. Solo administradores pueden modificar esta informaci贸n.</p>
    <button (click)="abrirEdicion()" class="ml-4 px-4 py-2 bg-[#51946c] text-white text-sm rounded-lg shadow hover:bg-[#3d7354] transition">Editar Contacto</button>
  </div>
}

  <!-- Contenido principal -->
  <div class="p-6 max-w-6xl mx-auto mt-10">
    <h2 class="text-3xl font-semibold text-center text-green-700 mb-10">V铆as de Contacto</h2>

    @if (editando) {
  <div class="fixed inset-0 z-50">
    <div class="absolute inset-0 bg-black/30 backdrop-blur-[2px]"></div>

    <div class="absolute inset-0 flex items-center justify-center p-4">
      <div class="w-full max-w-md bg-white rounded-lg p-6 shadow-lg">
        <h3 class="text-xl font-semibold text-green-700 mb-4">Editar contacto</h3>

        <div class="space-y-4">
          <input class="w-full border p-3 rounded"
                 placeholder="Email"
                 [(ngModel)]="formContacto.email"/>

          <input class="w-full border p-3 rounded"
                 placeholder="Tel茅fono"
                 [(ngModel)]="formContacto.telefono"/>

          <input class="w-full border p-3 rounded"
                 placeholder="WhatsApp"
                 [(ngModel)]="formContacto.whatsapp"/>

          <input class="w-full border p-3 rounded"
                 placeholder="Horario de atenci贸n"
                 [(ngModel)]="formContacto.horario_atencion"/>
        </div>

        <div class="mt-6 flex justify-end gap-3">
          <button (click)="cerrarEdicion()"
                  class="px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400">
            Cancelar
          </button>

          <button (click)="guardarCambios()"
                  class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
            Guardar cambios
          </button>
        </div>
      </div>
    </div>
  </div>
}


    <div class="grid md:grid-cols-2 gap-10 items-start">
      <!-- Columna izquierda -->
      <div class="space-y-6">
        <div class="flex items-start gap-4">
          <a href="https://www.google.com/maps?q=30掳12'21.8%22S+64掳28'30.1%22W" target="_blank" class="text-green-600 hover:text-green-800" aria-label="Direcci贸n">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" class="w-6 h-6 fill-current"><path d="M192 0C85.97 0 0 85.97 0 192c0 77.41 26.97 99.03 172.3 309.7c9.531 13.77 29.91 13.77 39.44 0C357 291 384 269.4 384 192C384 85.97 298 0 192 0zM192 271.1c-44.13 0-80-35.88-80-80S147.9 111.1 192 111.1s80 35.88 80 80S236.1 271.1 192 271.1z"/></svg>
          </a>
          <div><h4 class="font-semibold">Ubicaci贸n</h4><p>Avenida Argentina, Villa Quilino, C贸rdoba</p></div>
        </div>

        <div class="flex items-start gap-4">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-6 h-6 text-green-600 fill-current"><path d="M256 0C114.6 0 0 114.6 0 256c0 141.4 114.6 256 256 256c141.4 0 256-114.6 256-256C512 114.6 397.4 0 256 0zM366.8 320c-4.438 7.703-12.52 12-20.8 12c-4.078 0-8.203-1.031-11.98-3.219L244 276.8C236.6 272.5 232 264.6 232 256V120C232 106.8 242.8 96 256 96s24 10.75 24 24v122.1l78.06 45.08C369.5 293.8 373.5 308.5 366.8 320z"/></svg>
          <div><h4 class="font-semibold">Horario de atenci贸n</h4><p>{{ contacto?.horario_atencion }}</p>
</div>
        </div>

        <div class="flex items-start gap-4">
          <a href="mailto:info@fava.com.ar" class="text-green-600 hover:text-green-800" aria-label="Email">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-6 h-6 fill-current"><path d="M256 352c-16.53 0-33.06-5.422-47.16-16.41L0 173.2V400C0 426.5 21.49 448 48 448h416c26.51 0 48-21.49 48-48V173.2l-208.8 162.5C289.1 346.6 272.5 352 256 352zM16.29 145.3l212.2 165.1c16.19 12.6 38.87 12.6 55.06 0l212.2-165.1C505.1 137.3 512 125 512 112C512 85.49 490.5 64 464 64h-416C21.49 64 0 85.49 0 112C0 125 6.01 137.3 16.29 145.3z"/></svg>
          </a>
          <div><h4 class="font-semibold">Email</h4><p>{{ contacto?.email }}</p>
</div>
        </div>

        <div class="flex items-start gap-4">
          <a href="tel:+5493516854031" class="text-green-600 hover:text-green-800" aria-label="Tel茅fono">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="w-6 h-6 fill-current"><path d="M272 0H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h224c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-64 452c0 6.6-5.4 12-12 12h-72c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v8zm64-80c0 6.6-5.4 12-12 12H60c-6.6 0-12-5.4-12-12V60c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v312z"/></svg>
          </a>
          <div><h4 class="font-semibold">Tel茅fono</h4><a [href]="'tel:' + contacto?.telefono">{{ contacto?.telefono }}</a>
</div>
        </div>

        <div class="flex items-start gap-4">
          <a href="https://api.whatsapp.com/send?phone=5493515457821" target="_blank" class="text-green-600 hover:text-green-800" aria-label="WhatsApp">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="w-6 h-6 fill-current"><path d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157z"/></svg>
          </a>
          <div><h4 class="font-semibold">WhatsApp</h4><a [href]="'https://api.whatsapp.com/send?phone=' + whatsappLimpio" target="_blank">
   {{ contacto?.whatsapp }}
</a>
</div>
        </div>
      </div>

      <!-- Columna derecha: formulario -->
      <div class="bg-gray-50 p-8 rounded-2xl shadow-md relative">
        <h3 class="text-2xl font-semibold text-center mb-6 text-green-700">Env铆anos un Mensaje</h3>
        <form (submit)="onEnviarFormulario($event)" class="space-y-4">
          <input type="text" placeholder="Nombre" class="w-full border rounded-lg p-3" name="nombre" [(ngModel)]="nombre" required />
          <textarea [(ngModel)]="mensaje" name="mensaje" rows="5" class="w-full border rounded-lg p-3" placeholder="Mensaje"></textarea>
          <button type="submit" class="w-full py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition">Enviar</button>
          @if (consultaService.hayConsultas()) {
  <button type="button" (click)="borrarConsultas()" class="w-full py-3 bg-red-500 text-white font-medium rounded-lg hover:bg-red-600 transition">Borrar consulta</button>
}

        </form>

        <!-- Modal con mensaje de whatsapp -->
        @if (mostrarModal) {
          <div class="fixed inset-0 z-50">
            <div class="absolute inset-0 bg-black/30 backdrop-blur-[2px] transition-opacity"></div>
            <div class="absolute inset-0 flex items-center justify-center p-4">
              <div class="w-full max-w-sm rounded-lg bg-white p-6 shadow-xl animate-in fade-in zoom-in duration-200">
                <div class="flex flex-col items-center text-center">
                  <div class="mb-4 flex size-12 items-center justify-center rounded-full bg-green-100">
                    <span class="material-symbols-outlined text-2xl text-green-600">chat</span>
                  </div>
                  <h3 id="modal-title" class="text-lg font-semibold text-gray-900">Consulta lista para enviar</h3>
                  <p class="mt-2 text-sm text-gray-500">Ser谩s redirigido a WhatsApp para completar tu consulta.</p>
                  <div class="mt-6 flex w-full flex-col-reverse gap-3 sm:flex-row sm:justify-center">
                    <button (click)="cancelarEnvio()" class="h-10 min-w-[84px] rounded-md border border-gray-300 bg-white px-4 text-sm font-semibold text-gray-700 shadow-sm hover:bg-gray-50">Cancelar</button>
                    <button (click)="confirmarEnvioWhatsApp()" class="h-10 min-w-[84px] rounded-md bg-green-600 px-4 text-sm font-semibold text-white shadow-sm hover:bg-green-700">Continuar</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        }
      </div>
    </div>

    <!-- Mapa -->
    <div class="mt-16">
      <h3 class="text-2xl font-semibold text-center mb-4 text-green-700">Vis铆tanos</h3>
      <iframe loading="lazy" class="w-full h-96 rounded-lg shadow-md" src="https://maps.google.com/maps?q=30掳12'21.8%22S+64掳28'30.1%22W&amp;t=m&amp;z=12&amp;output=embed&amp;iwloc=near" title="Ubicaci贸n" aria-label="Ubicaci贸n"></iframe>
    </div>
  </div>

  <!-- Modal de 茅xito / error -->
@if(mostrarModalResultado){
  <div class="fixed inset-0 z-50 flex items-center justify-center">
    <!-- Overlay -->
    <div class="absolute inset-0 bg-black/30 backdrop-blur-[2px] transition-opacity"></div>

    <!-- Contenedor del modal -->
    <div role="alert" aria-live="polite" class="relative bg-white w-[90%] max-w-md rounded-xl shadow-lg ring-1 transition-all duration-200 p-6 flex flex-col items-center gap-4 z-10">

      <!-- Icono din谩mico -->
      <span class="material-symbols-outlined text-3xl" [ngClass]="modalMensaje.toLowerCase().includes('error') ? 'text-red-600' : 'text-green-600'">
        {{ modalMensaje.toLowerCase().includes('error') ? 'error' : 'check_circle' }}
      </span>

      <!-- Mensaje -->
      <h2 class="text-center text-lg font-semibold text-gray-900">{{ modalMensaje }}</h2>

      <!-- Bot贸n aceptar -->
      <button type="button" (click)="cerrarModalResultado()" class="mt-2 px-5 py-2 rounded-lg font-medium text-white transition-colors duration-200" [ngClass]="modalMensaje.toLowerCase().includes('error') ? 'bg-red-600 hover:bg-red-700' : 'bg-green-600 hover:bg-green-700'">
        Aceptar
      </button>

      <!-- Bot贸n cerrar esquina superior -->
      <button type="button" (click)="cerrarModalResultado()" class="absolute top-2 right-2 text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-gray-400 rounded-full p-1">
        <span class="material-symbols-outlined text-base">close</span>
      </button>
    </div>
  </div>
}

</section>
